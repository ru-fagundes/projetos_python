
// üìä MEDIDAS DAX ESSENCIAIS PARA DASHBOARD DE VAREJO

// KPIs Principais
Total Vendas = SUM(Dataset_Principal[Valor_Venda])

Qtd Pedidos = DISTINCTCOUNT(Dataset_Principal[ID_Pedido])

Qtd Clientes = DISTINCTCOUNT(Dataset_Principal[ID_Cliente])

Qtd Produtos = DISTINCTCOUNT(Dataset_Principal[ID_Produto])

Ticket M√©dio = DIVIDE([Total Vendas], [Qtd Pedidos], 0)

// An√°lises Temporais
Total Vendas M√™s Anterior = 
CALCULATE(
    [Total Vendas],
    DATEADD(Dim_Tempo[Data_Pedido], -1, MONTH)
)

Crescimento MoM = 
DIVIDE(
    [Total Vendas] - [Total Vendas M√™s Anterior],
    [Total Vendas M√™s Anterior],
    0
) * 100

Total Vendas Ano Anterior = 
CALCULATE(
    [Total Vendas],
    SAMEPERIODLASTYEAR(Dim_Tempo[Data_Pedido])
)

Crescimento YoY = 
DIVIDE(
    [Total Vendas] - [Total Vendas Ano Anterior],
    [Total Vendas Ano Anterior],
    0
) * 100

// An√°lises de Segmenta√ß√£o
% Vendas por Segmento = 
DIVIDE(
    [Total Vendas],
    CALCULATE([Total Vendas], ALL(Dim_Cliente[Segmento])),
    0
) * 100

% Vendas por Categoria = 
DIVIDE(
    [Total Vendas],
    CALCULATE([Total Vendas], ALL(Dim_Produto[Categoria])),
    0
) * 100

// Ranking e An√°lises Avan√ßadas
Rank Estado = 
RANKX(
    ALL(Dim_Geografia[Estado]),
    [Total Vendas],
    ,
    DESC
)

M√©dia M√≥vel 3 Meses = 
AVERAGEX(
    DATESINPERIOD(
        Dim_Tempo[Data_Pedido],
        LASTDATE(Dim_Tempo[Data_Pedido]),
        -3,
        MONTH
    ),
    [Total Vendas]
)

// Indicadores de Performance
Meta Vendas = [Total Vendas] * 1.1  // Meta 10% acima das vendas atuais

Performance vs Meta = 
VAR Meta = [Meta Vendas]
VAR Realizado = [Total Vendas]
RETURN 
    IF(
        Realizado >= Meta,
        "‚úÖ Acima da Meta",
        "‚ö†Ô∏è Abaixo da Meta"
    )

// An√°lise de Concentra√ß√£o
Top 10 Estados Vendas = 
VAR RankAtual = [Rank Estado]
RETURN 
    IF(
        RankAtual <= 10,
        [Total Vendas],
        BLANK()
    )

// An√°lise Sazonal
√çndice Sazonalidade = 
VAR VendasMes = [Total Vendas]
VAR MediaAnual = 
    CALCULATE(
        AVERAGE(Dataset_Principal[Valor_Venda]),
        ALL(Dim_Tempo[Mes])
    )
RETURN 
    DIVIDE(VendasMes, MediaAnual, 0)
